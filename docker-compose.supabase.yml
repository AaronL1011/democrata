# Use with Supabase for Postgres:
#   docker compose -f docker-compose.yml -f docker-compose.supabase.yml up -d
# Requires DATABASE_URL in .env pointing to your Supabase connection string.
# Postgres is disabled via profile; api and arq-worker use DATABASE_URL from .env.

services:
  api:
    environment:
      DATABASE_URL: ${DATABASE_URL}
    depends_on: !reset
      redis:
        condition: service_healthy
      qdrant:
        condition: service_healthy

  arq-worker:
    environment:
      DATABASE_URL: ${DATABASE_URL}
    depends_on: !reset
      redis:
        condition: service_healthy
      qdrant:
        condition: service_healthy

  postgres:
    profiles:
      - local
